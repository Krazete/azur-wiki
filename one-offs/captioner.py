import os
import re
import json

# this generates captions for https://youtu.be/p1LSn4mYjSw (tb)
# (for the Story and Secretary lines, not for General)
# and also for https://youtu.be/rj2HoDK13K8 (navi)

seclines = {}
memlines = {}

for lang in ['EN', 'CN', 'JP']:
    with open('{}/ShareCfg/secretary_special_ship.json'.format(lang), 'r', encoding='utf-8') as fp:
        seclines[lang] = json.load(fp)
    with open('output/voice/{}.json'.format(lang), 'r', encoding='utf-8') as fp:
        memlines[lang] = json.load(fp)

ts = {
    'tb': [
        ('0:09:23.791,0:09:26.416', 'educate-tb-story-1-1', 0),
        ('0:09:26.416,0:09:30.250', 'educate-tb-story-1-2', 0),
        ('0:09:30.250,0:09:33.375', 'educate-tb-story-1-3', 0),
        ('0:09:33.375,0:09:41.291', 'educate-tb-story-1-4', 0),
        ('0:09:41.291,0:09:51.125', 'educate-tb-story-1-5', 0),
        ('0:09:51.125,0:09:55.458', 'educate-tb-story-1-6', 0),
        ('0:09:55.458,0:09:59.791', 'educate-tb-story-1-7', 0),
        ('0:09:59.791,0:10:07.416', 'educate-tb-story-1-8', 0),
        ('0:10:07.416,0:10:14.250', 'educate-tb-story-1-9', 0),
        ('0:10:14.250,0:10:15.791', 'educate-tb-story-1-10', 0),
        ('0:10:15.791,0:10:21.708', 'educate-tb-story-1-11', 0),
        ('0:10:21.708,0:10:23.375', 'educate-tb-story-1-12', 0),
        ('0:10:23.375,0:10:25.333', 'educate-tb-story-1-13', 0),
        ('0:10:25.333,0:10:28.166', 'educate-tb-story-1-14', 0),
        ('0:10:28.166,0:10:32.458', 'educate-tb-story-1-15', 0),
        ('0:10:32.458,0:10:43.833', 'educate-tb-story-1-16', 0),
        ('0:10:43.833,0:10:47.750', 'educate-tb-story-2-1', 0),
        ('0:10:47.750,0:10:49.708', 'educate-tb-story-2-2', 0),
        ('0:10:49.708,0:10:56.333', 'educate-tb-story-2-3', 0),
        ('0:10:56.333,0:11:04.166', 'educate-tb-story-2-4', 0),
        ('0:11:04.166,0:11:14.916', 'educate-tb-story-2-5', 0),
        ('0:11:14.916,0:11:17.041', 'educate-tb-story-2-6', 0),
        ('0:11:17.041,0:11:20.375', 'educate-tb-story-2-7', 0),
        ('0:11:20.375,0:11:24.750', 'educate-tb-story-2-8', 0),
        ('0:11:24.750,0:11:35.000', 'educate-tb-story-2-9', 0),
        ('0:11:35.000,0:11:40.083', 'educate-tb-story-2-10', 0),
        ('0:11:40.083,0:11:47.416', 'educate-tb-story-2-11', 0),
        ('0:11:47.416,0:11:48.833', 'educate-tb-story-2-12', 0),
        ('0:11:48.833,0:11:54.875', 'educate-tb-story-2-13', 0),
        ('0:11:54.875,0:11:56.833', 'educate-tb-story-2-14', 0),
        ('0:11:56.833,0:12:06.958', 'educate-tb-story-2-15', 0),
        ('0:12:06.958,0:12:11.875', 'educate-tb-story-2-16', 0),
        ('0:12:11.875,0:12:13.083', 'educate-tb-story-2-17', 0),
        ('0:12:13.083,0:12:19.083', 'educate-tb-story-2-18', 0),
        ('0:12:19.083,0:12:23.416', 'educate-tb-story-2-19', 0),
        ('0:12:23.416,0:12:32.333', 'educate-tb-story-2-20', 0),
        ('0:12:32.333,0:12:35.541', 'educate-tb-story-2-21', 0),
        ('0:12:35.541,0:12:37.541', 'educate-tb-story-31-1', 0),
        ('0:12:37.541,0:12:40.583', 'educate-tb-story-31-2', 0),
        ('0:12:40.583,0:12:47.541', 'educate-tb-story-31-3', 0),
        ('0:12:47.541,0:12:54.000', 'educate-tb-story-31-4', 0),
        ('0:12:54.000,0:13:01.583', 'educate-tb-story-31-5', 0),
        ('0:13:01.583,0:13:05.208', 'educate-tb-story-31-6', 0),
        ('0:13:05.208,0:13:13.250', 'educate-tb-story-31-7', 0),
        ('0:13:13.250,0:13:16.000', 'educate-tb-story-31-8', 0),
        ('0:13:16.000,0:13:18.166', 'educate-tb-story-31-9', 0),
        ('0:13:18.166,0:13:20.208', 'educate-tb-story-31-10', 0),
        ('0:13:20.208,0:13:24.333', 'educate-tb-story-31-11', 0),
        ('0:13:24.333,0:13:27.583', 'educate-tb-story-31-12', 0),
        ('0:13:27.583,0:13:30.916', 'educate-tb-story-31-13', 0),
        ('0:13:30.916,0:13:33.291', 'educate-tb-story-31-14', 0),
        ('0:13:33.291,0:13:37.500', 'educate-tb-story-31-15', 0),
        ('0:13:37.500,0:13:40.708', 'educate-tb-story-31-16', 0),
        ('0:13:40.708,0:13:44.458', 'educate-tb-story-31-17', 0),
        ('0:13:44.458,0:13:48.833', 'educate-tb-story-31-18', 0),
        ('0:13:48.833,0:13:56.666', 'educate-tb-story-31-19', 0),
        ('0:13:56.666,0:14:06.500', 'educate-tb-story-31-20', 0),
        ('0:14:06.500,0:14:11.916', 'educate-tb-story-31-21', 0),
        ('0:14:11.916,0:14:20.916', 'educate-tb-story-31-22', 0),
        ('0:14:20.916,0:14:23.916', 'educate-tb-story-31-23', 0),
        ('0:14:23.916,0:14:31.333', 'educate-tb-story-31-24', 0),
        ('0:14:31.333,0:14:40.666', 'educate-tb-story-31-25', 0),
        ('0:14:40.666,0:14:49.083', 'educate-tb-story-31-26', 0),
        ('0:14:49.083,0:14:51.041', 'educate-tb-story-31-27', 0),
        ('0:14:51.041,0:14:54.875', 'educate-tb-story-31-28', 0),
        ('0:14:54.875,0:15:00.625', 'educate-tb-story-31-29', 0),
        ('0:15:00.625,0:15:08.000', 'educate-tb-story-31-30', 0),
        ('0:15:08.000,0:15:12.583', 'educate-tb-story-31-31', 0),
        ('0:15:12.583,0:15:13.916', 'educate-tb-story-32-1', 0),
        ('0:15:13.916,0:15:19.250', 'educate-tb-story-32-2', 0),
        ('0:15:19.250,0:15:25.708', 'educate-tb-story-32-3', 0),
        ('0:15:25.708,0:15:30.208', 'educate-tb-story-32-4', 0),
        ('0:15:30.208,0:15:37.750', 'educate-tb-story-32-5', 0),
        ('0:15:37.750,0:15:42.166', 'educate-tb-story-32-6', 0),
        ('0:15:42.166,0:15:47.916', 'educate-tb-story-32-7', 0),
        ('0:15:47.916,0:15:53.541', 'educate-tb-story-32-8', 0),
        ('0:15:53.541,0:15:55.708', 'educate-tb-story-32-9', 0),
        ('0:15:55.708,0:15:59.875', 'educate-tb-story-32-10', 0),
        ('0:15:59.875,0:16:01.833', 'educate-tb-story-32-11', 0),
        ('0:16:01.833,0:16:08.166', 'educate-tb-story-32-12', 0),
        ('0:16:08.166,0:16:12.458', 'educate-tb-story-32-13', 0),
        ('0:16:12.458,0:16:15.625', 'educate-tb-story-32-14', 0),
        ('0:16:15.625,0:16:18.541', 'educate-tb-story-32-15', 0),
        ('0:16:18.541,0:16:24.166', 'educate-tb-story-32-16', 0),
        ('0:16:24.166,0:16:30.958', 'educate-tb-story-32-17', 0),
        ('0:16:30.958,0:16:35.166', 'educate-tb-story-32-18', 0),
        ('0:16:35.166,0:16:43.416', 'educate-tb-story-32-19', 0),
        ('0:16:43.416,0:16:47.250', 'educate-tb-story-32-20', 0),
        ('0:16:47.250,0:16:51.916', 'educate-tb-story-32-21', 0),
        ('0:16:51.916,0:16:55.125', 'educate-tb-story-32-22', 0),
        ('0:16:55.125,0:17:00.666', 'educate-tb-story-32-23', 0),
        ('0:17:00.666,0:17:09.041', 'educate-tb-story-32-24', 0),
        ('0:17:09.041,0:17:13.875', 'educate-tb-story-32-25', 0),
        ('0:17:13.875,0:17:20.375', 'educate-tb-story-32-26', 0),
        ('0:17:20.375,0:17:24.541', 'educate-tb-story-32-27', 0),
        ('0:17:24.541,0:17:27.791', 'educate-tb-story-32-28', 0),
        ('0:17:27.791,0:17:34.791', 'educate-tb-story-32-29', 0),
        ('0:17:34.791,0:17:39.041', 'educate-tb-story-32-30', 0),
        ('0:17:39.041,0:17:43.875', 'educate-tb-story-32-31', 0),
        ('0:17:43.875,0:17:51.041', 'educate-tb-story-32-32', 0),
        ('0:17:51.041,0:17:56.583', 'educate-tb-story-32-33', 0),
        ('0:17:56.583,0:17:59.125', 'educate-tb-story-32-34', 0),
        ('0:17:59.125,0:18:03.500', 'educate-tb-story-33-1', 0),
        ('0:18:03.500,0:18:09.500', 'educate-tb-story-33-2', 0),
        ('0:18:09.500,0:18:16.750', 'educate-tb-story-33-3', 0),
        ('0:18:16.750,0:18:22.333', 'educate-tb-story-33-4', 0),
        ('0:18:22.333,0:18:30.041', 'educate-tb-story-33-5', 0),
        ('0:18:30.041,0:18:32.041', 'educate-tb-story-33-6', 0),
        ('0:18:32.041,0:18:41.541', 'educate-tb-story-33-7', 0),
        ('0:18:41.541,0:18:48.916', 'educate-tb-story-33-8', 0),
        ('0:18:48.916,0:18:52.041', 'educate-tb-story-33-9', 0),
        ('0:18:52.041,0:18:54.083', 'educate-tb-story-33-10', 0),
        ('0:18:54.083,0:18:57.375', 'educate-tb-story-33-11', 0),
        ('0:18:57.375,0:19:02.208', 'educate-tb-story-33-12', 0),
        ('0:19:02.208,0:19:11.125', 'educate-tb-story-33-13', 0),
        ('0:19:11.125,0:19:16.416', 'educate-tb-story-33-14', 0),
        ('0:19:16.416,0:19:21.041', 'educate-tb-story-33-15', 0),
        ('0:19:21.041,0:19:22.791', 'educate-tb-story-33-16', 0),
        ('0:19:22.791,0:19:30.583', 'educate-tb-story-33-17', 0),
        ('0:19:30.583,0:19:34.333', 'educate-tb-story-33-18', 0),
        ('0:19:34.333,0:19:37.083', 'educate-tb-story-33-19', 0),
        ('0:19:37.083,0:19:44.458', 'educate-tb-story-33-20', 0),
        ('0:19:44.458,0:19:50.708', 'educate-tb-story-33-21', 0),
        ('0:19:50.708,0:19:54.958', 'educate-tb-story-33-22', 0),
        ('0:19:54.958,0:19:57.208', 'educate-tb-story-33-23', 0),
        ('0:19:57.208,0:20:00.041', 'educate-tb-story-33-24', 0),
        ('0:20:00.041,0:20:03.000', 'educate-tb-story-33-25', 0),
        ('0:20:03.000,0:20:07.708', 'educate-tb-story-33-26', 0),
        ('0:20:07.708,0:20:13.208', 'educate-tb-story-33-27', 0),
        ('0:20:13.208,0:20:18.958', 'educate-tb-story-33-28', 0),
        ('0:20:18.958,0:20:27.083', 'educate-tb-story-33-29', 0),
        ('0:20:27.083,0:20:38.166', 'educate-tb-story-33-30', 0),
        ('0:20:38.166,0:20:42.583', 'educate-tb-story-33-31', 0),
        ('0:20:42.583,0:20:50.958', 'educate-tb-story-33-32', 0),
        ('0:20:50.958,0:21:04.541', 'educate-tb-story-33-33', 0),
        ('0:21:04.541,0:21:10.333', 'educate-tb-story-33-34', 0),
        ('0:21:10.333,0:21:21.791', 'educate-tb-story-33-35', 0),
        ('0:21:21.791,0:21:28.291', 'educate-tb-story-33-36', 0),
        ('0:21:28.291,0:21:31.833', 'educate-tb-story-33-37', 0),
        ('0:21:31.833,0:21:37.166', 'educate-tb-story-33-38', 0),
        ('0:21:37.166,0:21:59.041', 'chime_0', 1000),
        ('0:21:59.041,0:22:21.166', 'chime_1', 1000),
        ('0:22:21.166,0:22:46.583', 'chime_2', 1000),
        ('0:22:46.583,0:23:11.833', 'chime_3', 1000),
        ('0:23:11.833,0:23:36.250', 'chime_4', 1000),
        ('0:23:36.250,0:23:56.625', 'chime_5', 1000),
        ('0:23:56.625,0:24:16.791', 'chime_6', 1000),
        ('0:24:16.791,0:24:41.000', 'chime_7', 1000),
        ('0:24:41.000,0:25:06.541', 'chime_8', 1000),
        ('0:25:06.541,0:25:27.083', 'chime_9', 1000),
        ('0:25:27.083,0:25:44.666', 'chime_10', 1000),
        ('0:25:44.666,0:26:07.750', 'chime_11', 1000),
        ('0:26:07.750,0:26:32.041', 'chime_12', 1000),
        ('0:26:32.041,0:26:58.958', 'chime_13', 1000),
        ('0:26:58.958,0:27:19.458', 'chime_14', 1000),
        ('0:27:19.458,0:27:53.041', 'chime_15', 1000),
        ('0:27:53.041,0:28:09.958', 'chime_16', 1000),
        ('0:28:09.958,0:28:28.375', 'chime_17', 1000),
        ('0:28:28.375,0:28:51.000', 'chime_18', 1000),
        ('0:28:51.000,0:29:18.333', 'chime_19', 1000),
        ('0:29:18.333,0:29:40.750', 'chime_20', 1000),
        ('0:29:40.750,0:30:05.166', 'chime_21', 1000),
        ('0:30:05.166,0:30:25.791', 'chime_22', 1000),
        ('0:30:25.791,0:30:48.750', 'chime_23', 1000),
        ('0:30:48.750,0:31:20.125', 'chuxi', 1000),
        ('0:31:20.125,0:31:35.125', 'expedition', 1000),
        ('0:31:35.125,0:31:48.583', 'genghuan', 1000),
        ('0:31:48.583,0:32:09.833', 'home', 1000),
        ('0:32:09.833,0:32:29.125', 'huodong', 1000),
        ('0:32:29.125,0:32:40.083', 'login', 1000),
        ('0:32:40.083,0:32:48.791', 'mail', 1000),
        ('0:32:48.791,0:33:10.916', 'main_1', 1000),
        ('0:33:10.916,0:33:24.916', 'main_2', 1000),
        ('0:33:24.916,0:33:44.125', 'main_3', 1000),
        ('0:33:44.125,0:34:08.125', 'main_4', 1000),
        ('0:34:08.125,0:34:30.166', 'main_5', 1000),
        ('0:34:30.166,0:34:51.875', 'mission', 1000),
        ('0:34:51.875,0:35:10.000', 'mission_complete', 1000),
        ('0:35:10.000,0:35:31.583', 'qingrenjie', 1000),
        ('0:35:31.583,0:36:03.666', 'shengdan', 1000),
        ('0:36:03.666,0:36:15.041', 'touch', 1000),
        ('0:36:15.041,0:36:40.791', 'wansheng', 1000),
        ('0:36:40.791,0:37:06.250', 'xinnian', 1000),
        ('0:37:06.250,0:37:21.750', 'zhongqiu', 1000),
        ('0:37:21.750,0:37:49.875', 'chuxi', 1100),
        ('0:37:49.875,0:37:56.708', 'expedition', 1100),
        ('0:37:56.708,0:38:05.166', 'home', 1100),
        ('0:38:05.166,0:38:19.000', 'huodong', 1100),
        ('0:38:19.000,0:38:35.250', 'login', 1100),
        ('0:38:35.250,0:38:42.708', 'mail', 1100),
        ('0:38:42.708,0:38:52.500', 'main_1', 1100),
        ('0:38:52.500,0:39:08.916', 'main_2', 1100),
        ('0:39:08.916,0:39:21.291', 'main_3', 1100),
        ('0:39:21.291,0:39:32.833', 'main_4', 1100),
        ('0:39:32.833,0:39:51.500', 'main_5', 1100),
        ('0:39:51.500,0:40:04.791', 'mission', 1100),
        ('0:40:04.791,0:40:19.416', 'mission_complete', 1100),
        ('0:40:19.416,0:40:38.041', 'qingrenjie', 1100),
        ('0:40:38.041,0:40:59.875', 'shengdan', 1100),
        ('0:40:59.875,0:41:04.625', 'touch', 1100),
        ('0:41:04.625,0:41:25.625', 'wansheng', 1100),
        ('0:41:25.625,0:41:43.333', 'xinnian', 1100),
        ('0:41:43.333,0:41:57.375', 'zhongqiu', 1100),
        ('0:41:57.375,0:42:30.458', 'chuxi', 1200),
        ('0:42:30.458,0:42:37.416', 'expedition', 1200),
        ('0:42:37.416,0:42:46.833', 'home', 1200),
        ('0:42:46.833,0:42:54.125', 'huodong', 1200),
        ('0:42:54.125,0:43:11.291', 'login', 1200),
        ('0:43:11.291,0:43:20.833', 'mail', 1200),
        ('0:43:20.833,0:43:28.791', 'main_1', 1200),
        ('0:43:28.791,0:43:44.666', 'main_2', 1200),
        ('0:43:44.666,0:44:02.208', 'main_3', 1200),
        ('0:44:02.208,0:44:16.833', 'main_4', 1200),
        ('0:44:16.833,0:44:29.666', 'main_5', 1200),
        ('0:44:29.666,0:44:44.500', 'mission', 1200),
        ('0:44:44.500,0:44:52.625', 'mission_complete', 1200),
        ('0:44:52.625,0:45:02.333', 'qingrenjie', 1200),
        ('0:45:02.333,0:45:12.166', 'shengdan', 1200),
        ('0:45:12.166,0:45:17.625', 'touch', 1200),
        ('0:45:17.625,0:45:29.833', 'wansheng', 1200),
        ('0:45:29.833,0:45:45.291', 'xinnian', 1200),
        ('0:45:45.291,0:46:02.208', 'zhongqiu', 1200),
        ('0:46:02.208,0:46:24.875', 'chuxi', 1300),
        ('0:46:24.875,0:46:43.750', 'expedition', 1300),
        ('0:46:43.750,0:46:56.458', 'home', 1300),
        ('0:46:56.458,0:47:06.625', 'huodong', 1300),
        ('0:47:06.625,0:47:19.125', 'login', 1300),
        ('0:47:19.125,0:47:32.000', 'mail', 1300),
        ('0:47:32.000,0:47:48.041', 'main_1', 1300),
        ('0:47:48.041,0:48:03.333', 'main_2', 1300),
        ('0:48:03.333,0:48:19.125', 'main_3', 1300),
        ('0:48:19.125,0:48:40.875', 'main_4', 1300),
        ('0:48:40.875,0:48:54.958', 'main_5', 1300),
        ('0:48:54.958,0:49:04.833', 'mission', 1300),
        ('0:49:04.833,0:49:22.500', 'mission_complete', 1300),
        ('0:49:22.500,0:49:38.250', 'qingrenjie', 1300),
        ('0:49:38.250,0:49:52.875', 'shengdan', 1300),
        ('0:49:52.875,0:50:00.166', 'touch', 1300),
        ('0:50:00.166,0:50:22.291', 'wansheng', 1300),
        ('0:50:22.291,0:50:36.875', 'xinnian', 1300),
        ('0:50:36.875,0:50:50.458', 'zhongqiu', 1300),
    ],
    'navi': [
        ('0:00:00.000,0:00:14.958', 'chime_0', 2000),
        ('0:00:14.958,0:00:32.333', 'chime_1', 2000),
        ('0:00:32.333,0:00:43.375', 'chime_2', 2000),
        ('0:00:43.375,0:01:00.750', 'chime_3', 2000),
        ('0:01:00.750,0:01:15.833', 'chime_4', 2000),
        ('0:01:15.833,0:01:33.041', 'chime_5', 2000),
        ('0:01:33.041,0:01:46.416', 'chime_6', 2000),
        ('0:01:46.416,0:02:02.250', 'chime_7', 2000),
        ('0:02:02.250,0:02:20.375', 'chime_8', 2000),
        ('0:02:20.375,0:02:36.583', 'chime_9', 2000),
        ('0:02:36.583,0:02:48.041', 'chime_10', 2000),
        ('0:02:48.041,0:02:59.541', 'chime_11', 2000),
        ('0:02:59.541,0:03:18.166', 'chime_12', 2000),
        ('0:03:18.166,0:03:35.666', 'chime_13', 2000),
        ('0:03:35.666,0:03:57.541', 'chime_14', 2000),
        ('0:03:57.541,0:04:11.583', 'chime_15', 2000),
        ('0:04:11.583,0:04:20.083', 'chime_16', 2000),
        ('0:04:20.083,0:04:37.958', 'chime_17', 2000),
        ('0:04:37.958,0:04:51.291', 'chime_18', 2000),
        ('0:04:51.291,0:05:05.333', 'chime_19', 2000),
        ('0:05:05.333,0:05:18.583', 'chime_20', 2000),
        ('0:05:18.583,0:05:34.916', 'chime_21', 2000),
        ('0:05:34.916,0:05:53.541', 'chime_22', 2000),
        ('0:05:53.541,0:06:06.875', 'chime_23', 2000),
        ('0:06:06.875,0:06:23.416', 'chuxi', 2000),
        ('0:06:23.416,0:06:30.791', 'expedition', 2000),
        ('0:06:30.791,0:06:35.541', 'genghuan', 2000),
        ('0:06:35.541,0:06:49.041', 'home', 2000),
        ('0:06:49.041,0:06:55.041', 'huodong', 2000),
        ('0:06:55.041,0:07:06.666', 'login', 2000),
        ('0:07:06.666,0:07:16.833', 'mail', 2000),
        ('0:07:16.833,0:07:25.458', 'main_1', 2000),
        ('0:07:25.458,0:07:38.666', 'main_2', 2000),
        ('0:07:38.666,0:07:57.333', 'main_3', 2000),
        ('0:07:57.333,0:08:08.750', 'mission', 2000),
        ('0:08:08.750,0:08:18.375', 'mission_complete', 2000),
        ('0:08:18.375,0:08:32.916', 'qingrenjie', 2000),
        ('0:08:32.916,0:08:43.000', 'shengdan', 2000),
        ('0:08:43.000,0:08:46.833', 'touch', 2000),
        ('0:08:46.833,0:09:01.791', 'wansheng', 2000),
        ('0:09:01.791,0:09:20.916', 'xinnian', 2000),
        ('0:09:20.916,0:09:32.750', 'zhongqiu', 2000),
        ('0:09:32.750,0:09:51.750', 'chuxi', 2100),
        ('0:09:51.750,0:10:06.708', 'expedition', 2100),
        ('0:10:06.708,0:10:18.416', 'home', 2100),
        ('0:10:18.416,0:10:28.958', 'huodong', 2100),
        ('0:10:28.958,0:10:37.333', 'login', 2100),
        ('0:10:37.333,0:10:42.958', 'mail', 2100),
        ('0:10:42.958,0:10:52.333', 'main_1', 2100),
        ('0:10:52.333,0:11:05.041', 'main_2', 2100),
        ('0:11:05.041,0:11:18.458', 'main_3', 2100),
        ('0:11:18.458,0:11:28.333', 'mission', 2100),
        ('0:11:28.333,0:11:39.500', 'mission_complete', 2100),
        ('0:11:39.500,0:11:54.541', 'qingrenjie', 2100),
        ('0:11:54.541,0:12:06.958', 'shengdan', 2100),
        ('0:12:06.958,0:12:22.416', 'touch', 2100),
        ('0:12:22.416,0:12:41.750', 'wansheng', 2100),
        ('0:12:41.750,0:12:59.583', 'xinnian', 2100),
        ('0:12:59.583,0:13:10.500', 'zhongqiu', 2100),
        ('0:13:10.500,0:13:31.166', 'chuxi', 2200),
        ('0:13:31.166,0:13:38.541', 'expedition', 2200),
        ('0:13:38.541,0:13:53.000', 'home', 2200),
        ('0:13:53.000,0:14:06.375', 'huodong', 2200),
        ('0:14:06.375,0:14:20.958', 'login', 2200),
        ('0:14:20.958,0:14:32.625', 'mail', 2200),
        ('0:14:32.625,0:14:46.875', 'main_1', 2200),
        ('0:14:46.875,0:15:02.750', 'main_2', 2200),
        ('0:15:02.750,0:15:17.375', 'main_3', 2200),
        ('0:15:17.375,0:15:26.458', 'mission', 2200),
        ('0:15:26.458,0:15:34.916', 'mission_complete', 2200),
        ('0:15:34.916,0:15:48.250', 'qingrenjie', 2200),
        ('0:15:48.250,0:16:03.000', 'shengdan', 2200),
        ('0:16:03.000,0:16:09.541', 'touch', 2200),
        ('0:16:09.541,0:16:25.916', 'wansheng', 2200),
        ('0:16:25.916,0:16:51.291', 'xinnian', 2200),
        ('0:16:51.291,0:17:03.833', 'zhongqiu', 2200),
        ('0:17:03.833,0:17:21.958', 'chuxi', 2300),
        ('0:17:21.958,0:17:28.250', 'expedition', 2300),
        ('0:17:28.250,0:17:36.333', 'home', 2300),
        ('0:17:36.333,0:17:43.208', 'huodong', 2300),
        ('0:17:43.208,0:17:58.125', 'login', 2300),
        ('0:17:58.125,0:18:06.125', 'mail', 2300),
        ('0:18:06.125,0:18:16.166', 'main_1', 2300),
        ('0:18:16.166,0:18:27.333', 'main_2', 2300),
        ('0:18:27.333,0:18:41.375', 'main_3', 2300),
        ('0:18:41.375,0:18:49.708', 'mission', 2300),
        ('0:18:49.708,0:19:04.750', 'mission_complete', 2300),
        ('0:19:04.750,0:19:16.500', 'qingrenjie', 2300),
        ('0:19:16.500,0:19:25.625', 'shengdan', 2300),
        ('0:19:25.625,0:19:32.666', 'touch', 2300),
        ('0:19:32.666,0:19:46.416', 'wansheng', 2300),
        ('0:19:46.416,0:20:03.291', 'xinnian', 2300),
        ('0:20:03.291,0:20:19.791', 'zhongqiu', 2300)
    ]
}

def buildsrt(siren, lang):
    srt = []
    for time, line, sid in ts[siren]:
        if line.startswith('educate'):
            caption = memlines[lang]['event:/educate/tb/{}'.format(line)]
        elif line.startswith('main_'):
            index = int(re.sub('\D+', '', line)) - 1
            mains = seclines[lang][str(sid)]['main'].split('|')
            caption = mains[index]
        else:
            caption = seclines[lang][str(sid)][line]
        caption = re.sub('.+<br>', '', caption)
        srt += [time, caption, '']
    os.makedirs('output/captions', exist_ok=True)
    with open('output/captions/{}_{}.sbv'.format(lang, siren), 'w', encoding='utf-8') as fp:
        fp.write('\n'.join(srt))

buildsrt('tb', 'EN')
buildsrt('tb', 'CN')
buildsrt('tb', 'JP')

buildsrt('navi', 'EN')
buildsrt('navi', 'CN')
buildsrt('navi', 'JP')
